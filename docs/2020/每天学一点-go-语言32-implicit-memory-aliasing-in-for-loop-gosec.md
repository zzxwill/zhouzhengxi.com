---
title: "每天学一点 Go 语言|32. Implicit memory aliasing in for loop. (gosec)"
date: "2020-11-23"
categories: 
  - "golang"
---

指针报错：

\[\[code\]\]czo3Mzk6XCJHNjAxOiBJbXBsaWNpdCBtZW1vcnkgYWxpYXNpbmcgaW4gZm9yIGxvb3AuIChnb3NlYykKCmZvciBfLCBjb25mbGljdCB7WyYqJl19Oj0gcmFuZ2UgdHJhaXREZWYuU3BlYy5Db25mbGljdHNXaXRoIHsKICBmb3IgXywgY29tcGF0aWJsZVRyYWl0IDo9IHJhbmdlIGNvbXtbJiomXX1wYXRpYmxlVHJhaXRzIHsKICAgICBjb21wYXRpYmxlVHJhaXREZWYsIGVyciA6PSB1dGlsLkZldGNoVHJhaXREZWZpbml0aW9uKGN0e1smKiZdfXgsIHIuY2xpZW50LCByLmRtLCAmYW1wO2NvbXBhdGlibGVUcmFpdCkKICAgICBpZiBlcnIgIT0gbmlsIHsKICAgICAgICBpZiBhcGl7WyYqJl19ZXJyb3JzLklzTm90Rm91bmQoZXJyKSB7CiAgICAgICAgICAgcmV0dXJuIHQsIHV0aWwuR2V0RHVtbXlUcmFpdERlZmluaXRpb24odHtbJiomXX0pLCBuaWwKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG5pbCwgbmlsLCBlcnJvcnMuV3JhcGYoZXJyLCBlcnJGbXRHZXRUcmFpdERle1smKiZdfWZpbml0aW9uLCB0LkdldEFQSVZlcnNpb24oKSwgdC5HZXRLaW5kKCksIHQuR2V0TmFtZSgpKQogICAgIH0KICAgICBpZiBjb25mbGl7WyYqJl19Y3QgPT0gY29tcGF0aWJsZVRyYWl0RGVmLk5hbWUgewogICAgICAgIGVyciA6PSBlcnJvcnMuTmV3KFxcXCJUcmFpdENvbmZsaWN0RXJye1smKiZdfW9yXFxcIikKICAgICAgICByZXR1cm4gbmlsLCBuaWwsIGVycm9ycy5XcmFwZihlcnIsIGVyckZtdENvbmZsaWN0c1RyYWl0LCB0LkdldHtbJiomXX1BUElWZXJzaW9uKCksIHQuR2V0S2luZCgpLCB0LkdldE5hbWUoKSwgY29uZmxpY3QpCiAgICAgfQogIH0KfVwiO3tbJiomXX0=\[\[/code\]\]

循环里，compatibleTrait 是一个变量，&compatibleTrait 地址只有一个，所以，做不到在每次循环里取到当前值。

Ref: [Implicit memory aliasing in for loop](https://stackoverflow.com/questions/62446118/implicit-memory-aliasing-in-for-loop)
